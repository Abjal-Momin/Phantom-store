import{g as i,s as S,u as q,p as f}from"./showToast-DCjy7XeE.js";const C=(r,e)=>{let c=i().find(a=>a.id===r),u=1;return c&&(u=c.quantity,e=c.price),{quantity:u,price:e}},y=()=>{let r=document.querySelector(".product-sub-total"),e=document.querySelector(".discount-cart-price"),n=document.querySelector(".product-final"),a=i().reduce((l,t)=>{let o=parseInt(t.price)||0;return l+o},0);a=Math.floor(a),r.textContent=`₹ ${a}`,e.textContent=`-₹ ${a*.3}`,n.textContent=`₹ ${a*1.05}`},P=(r,e,n,c)=>{const u=document.querySelector(`#card${e}`),a=u.querySelector(".quantity-num"),l=u.querySelector(".discount-price");let t=1,o=0,d=i(),m=d.find(s=>s.id===e);m?(t=m.quantity,o=m.price):(o=c,c=c),r.target.className==="cart-increment"&&(t<20?t+=1:t===20&&(t=20,o=c*20)),r.target.className==="cart-decrement"&&t>1&&(t-=1),o=c*t,o=Number(o.toFixed(2));let p={id:e,quantity:t,price:o};p=d.map(s=>s.id===e?p:s),localStorage.setItem("cartProductLS",JSON.stringify(p)),a.innerText=t,l.innerText=`₹ ${o}`,y()},g=r=>{let e=i();e=e.filter(c=>c.id!==r),localStorage.setItem("cartProductLS",JSON.stringify(e));let n=document.querySelector(`#card${r}`);n&&(n.remove(),S("delete",r)),q(e),y()};let x=i(),$=f.filter(r=>x.some(e=>e.id===r.id));const v=document.querySelector(".product-cart-container"),L=document.querySelector("#product-cart-template"),N=()=>{$.forEach(r=>{const{category:e,id:n,image:c,name:u,price:a,stock:l}=r;let t=document.importNode(L.content,!0);const o=C(n,a);t.querySelector("#card-value").setAttribute("id",`card${n}`),t.querySelector(".category").textContent=e,t.querySelector(".product-img").src=c,t.querySelector(".product-name").textContent=u,t.querySelector(".quantity-num").textContent=o.quantity,t.querySelector(".discount-price").textContent=`₹ ${o.price}`,t.querySelector(".stock").addEventListener("click",d=>P(d,n,l,a)),t.querySelector(".remove-to-cart").addEventListener("click",()=>g(n)),v.append(t)})};N();y();
